---
title: 通过宝塔面板部署青龙面板和网站站点
published: 2026-02-14
pinned: false
description: 使用宝塔面板可视化部署青龙面板和网站站点笔记
tags: [青龙面板,笔记,宝塔面板]
category: 宝塔面板
licenseName: "已授权"
licenseUrl: "https://creativecommons.org/licenses/by-sa/4.0"
author: mortal
# sourceLink: "https://github.com/emn178/markdown"
draft: false
slug: baota
---

# 青龙面板部署使用笔记

>使用青龙面板有一小段时间了，最近一段时间没用，回想起来发现有点小细节忘记了，所以抽空整理了一下这个笔记

## 单实例部署

1. 安装宝塔面板，可视化操作，首次登录宝塔面板提示的安装「LNMP/LAMP环境」，无需安装直接关掉，青龙靠Docker，不靠这些环境，**宝塔面板默认端口8888，**服务器安全组要放行8888端口再登录宝塔面板
2. 宝塔面板左侧Docker直接安装Docker管理器最新版即可
3. 宝塔面板左侧**终端**或者SSH 连接服务器，执行以下命令，一键拉取青龙面板+创建容器

```bash
docker run -dit \
--name QL \
--hostname QL \
--restart always \
-p 5700:5700 \
-v $PWD/QL/config:/ql/config \
-v $PWD/QL/log:/ql/log \
-v $PWD/QL/db:/ql/db \
-v $PWD/QL/scripts:/ql/scripts \
-v $PWD/QL/jbot:/ql/jbot \
whyour/qinglong:latest
```

4. 命令备注

- **--name QL：** 给容器起名字叫QL，可以自定义英文
- **-p 5700:5700：** 把容器的5700端口，映射到服务器的5700端口，外面通过服务器IP:5700端口访问
- **-v 开头5行：** 把青龙的核心文件，存到服务器/root/QL文件夹，防止容器删了丢数据
- **--restart always：** 服务器重启、容器异常退出，会自动重启青龙，不用手动管
- **whyour/qinglong:latest：** 拉取最新版青龙，新手别改版本，避免出问题

>**验证是否成功：** 宝塔→Docker管理器→容器列表，能看到「QL」，状态是「运行中」，就说明装好了。

5. 💡在宝塔面板和服务器安全组同时放行5700端口，否则无法访问
6. 浏览器打开输入 **服务器IP:5700**访问青龙面板，进行初始化自定义账号密码即可，通知设置直接跳过即可无需配置

## 多实例部署

> 📌 多实例就是在同一个服务器上多装几个青龙面板，每一个面板对应不同的容器，互不干扰的，核心是改3个地方，避免冲突

### 多实例部署核心原则

每个实例必须改3个参数，和其他实例区分开

|配置项|第一个实例（QL）|第二个实例（QL2）|第三个实例（QL3）|备注|
|---|---|---|---|---|
|容器名称|QL|QL2|QL3|不能重复，好记就行|
|端口映射|5700:5700|5701:5700|5702:5700|服务器端口依次加1，容器内还是5700，当然也可以自定义|
|挂载目录|$PWD/QL/xxx|$PWD/QL2/xxx|$PWD/QL3/xxx|和容器名对应，自动创建，不用手动建|
### 第二个青龙实例部署步骤

1. 宝塔面板左侧**终端**或者SSH 连接服务器，执行以下命令，一键创建QL2（已经改好冲突参数，不用动）

```bash
docker run -dit \
--name QL2 \
--hostname QL2 \
--restart always \
-p 5701:5700 \
-v $PWD/QL2/config:/ql/config \
-v $PWD/QL2/log:/ql/log \
-v $PWD/QL2/db:/ql/db \
-v $PWD/QL2/scripts:/ql/scripts \
-v $PWD/QL2/jbot:/ql/jbot \
whyour/qinglong:latest
```

2. 只改了3个地方——容器名QL→QL2、端口5700→5701、目录QL→QL2，其他和第一个实例一样

>📌再添加更多的也是一样的原理，只需复制命令，修改对应的参数即可

3. 验证成功：Docker管理器→容器列表，能看到「QL2」，状态「运行中」，就没问题，和QL互不干扰。
4. 💡在宝塔面板和服务器安全组同时放行5701端口，否则无法访问
5. 浏览器打开输入 **服务器IP:5701**访问青龙面板，进行初始化自定义账号密码即可。
6. 监控资源：宝塔左边→「监控」→「系统状态」，能看CPU、内存占用，占用太高就停掉不常用的实例，别让服务器崩了

## 核心目录与文件管理

💡 **重点：**所有配置、脚本、密码都存在这些目录里，忘记密码、备份数据都靠它，核心是config目录，里面的文件不能删，删了打不开面板

### 核心目录位置（固定不变)

> 命令里的$PWD，就是服务器的/root目录，所有青龙实例的目录都在这里，一目了然：

- QL（第一个实例）：/root/QL

- QL2（第二个实例）：/root/QL2

- QL3（第三个实例）：/root/QL3

- 以此类推，实例名和目录名一样，找的时候不会错。

### 目录查看方式

#### 方法1：宝塔面板可视化

1. 宝塔→左边「文件」，进入文件管理器。

2. 左边找「root」文件夹，点进去（默认根目录是/，root在根目录下面）

3. 进入root后，就能看到QL、QL2这些实例目录，双击就能进，查看里面的文件

#### 方法2：终端命令查看

> 记住3个常用命令，复制就能执行，不用记语法：

- 查看所有实例目录：`ls /root/`（执行后会显示QL、QL2这些文件夹）。

- 进入某个实例目录（比如QL2）：`cd /root/QL2`。

- 查看实例里的核心文件夹：`ls`（会显示config、db、log、scripts、jbot五个文件夹）。

### 核心文件夹作用

每个实例目录（比如/root/QL2）里，有5个核心文件夹，各自的作用如下：

- config：最核心！存账号密码、面板配置、定时任务，里面核心文件如下

>✨**auth.json：** 唯一存账号密码的文件，忘记密码可以在这里找或者终端执行以下命令
>
>```bash
>cat /root/QL/config/auth.json  # 查看QL（第一个实例）密码
>cat /root/QL2/config/auth.json # 查看QL2（第二个实例）密码
>
># 执行后显示效果
>{
>  "user": "admin",
>  "password": "12345678"  // 自己改的密码，明文显示
>}
>```
>
>✨**config.sh：** 系统核心配置
>
>✨**extra.sh：** 额外启动脚本，不用改
>
>✨**notify.json：** 通知配置，后面要弄推送再改，平时不用管。
>
>✨**ql.conf：** 基础运行配置，也不要改

- scripts：存所有脚本，拉取的脚本、自己加的脚本，都在这里。
- log：存运行日志，脚本跑失败、面板出问题，看这里找原因。
- db：存数据库，比如任务记录、脚本执行记录，不用管，别删就行。
- jbot：机器人配置相关的，不用管，也别删。

## 基础使用

### 脚本库

> 📌「拉取脚本→设置定时任务→查看结果」这三步，下面是豆包给出的常用脚本拉库命令，没实测过，另外某社区开源脚本合集网址  **https://2.345yun.cn**

```bash
# 1. 拉取最全的综合脚本库
ql repo https://github.com/KingRan/KR.git "jd_|jx_|jdCookie" "activity|backUp" "^jd[^_]|USER|function|utils|sendNotify|ZooFaker_Necklace.js|JDJRValidator_Pure|sign_graphics_validate"

# 2. 拉取京豆/宠物/农场专用脚本
ql repo https://github.com/shufflewzc/faker2.git "jd_|jx_|gua_|jddj_|jdCookie" "activity|backUp" "^jd[^_]|USER|function|utils|sendNotify|ZooFaker_Necklace.js|JDJRValidator_Pure|sign_graphics_validate"

# 3. 拉取互助脚本
ql repo https://github.com/yuannian1112/jd_scripts.git "jd_|jx_|gua_|jddj_|jdCookie" "activity|backUp" "^jd[^_]|USER|function|utils|sendNotify|ZooFaker_Necklace.js|JDJRValidator_Pure|sign_graphics_validate"
```

### 拉取脚本操作步骤

>没有实操过，之前我一直都是用的社区开源脚本直接上传文件使用的

1. 登录青龙面板，左边→「脚本管理」→「新建脚本」。

3. 脚本名称：自定义（比如“京东脚本库”），脚本类型：选「shell」。

4. 把上面任意一条脚本命令，复制粘贴到「脚本内容」里，点「保存」。

5. 保存后，在脚本列表找到刚建的脚本，点「运行」，开始拉取（1-2分钟，看网速）。

6. 拉取完成：点「脚本管理」，就能看到所有拉取的脚本，自动存到scripts文件夹里，不用手动挪。

### 设置定时任务

1. 登录面板→左边「定时任务」→「新建任务」。
2. **命令填写规则：** 填脚本路径（脚本路径在「脚本管理」里，点脚本名称就能看到，比如ql script /ql/scripts/jd_sign.js）

3. 其他按照实际情况填写，点「保存」，定时任务就建好了，到时间会自动执行，不用管

### Cron计时规则

>青龙用 **5 字段 Cron**（分 时 日 月 周）即 **分钟 小时 日期 月份 星期**

* **示例一：** `0 0 * * *  `→每天凌晨 0 点 0 分执行
* **示例二：** `0 9,12,18 * * *` → 每天 9、12、18 点整执行   【多个值英文逗号分隔】

## 数据备份

> 📌自己暂时还没试过备份

1. 宝塔→文件→root，找到要备份的实例目录（比如QL2）。

2. 右键点目录，选「压缩」，格式选zip，点确定，等着压缩完成。

3. 压缩完后，右键点压缩包，选「下载」，存到自己电脑里，备份就完成了。

4. 恢复备份：面板崩了，删除原有实例目录，把压缩包上传到root目录，解压后，重启容器，数据就回来了。

# 网站部署使用笔记

## 单站点部署

### 前期工作

1. 安装宝塔面板，可视化操作，首次登录宝塔面板提示的安装「LNMP/LAMP环境」需要进行安装如果没有提示需要到软件商店搜索安装【Nginx+MySQL 5.7+PHP 7.4+phpMyAdmin】这是网站运行所需的必须环境，如果纯静态则不用安装phpMyAdmin，**宝塔面板默认端口8888，**服务器安全组要放行8888端口再登录宝塔面板
2. 云服务商控制台和宝塔面板安全控制台放行 **80 (HTTP)、443 (HTTPS)、8888 (宝塔)** 端口

### 添加站点

1. 宝塔面板→网站→添加站点
2. 域名填写服务器IP，如果有自定义域名可以填写自定义域名**同时需要先在域名服务商处解析到服务器 IP（A 记录，主机记录填 @和 www）**
3. 数据库：动态站勾选**MySQL**，自动创建数据库，记下数据库名、用户名、密码（后面要用）；静态站可不选，其他默认，点击 “提交”，站点创建完成

### 上传文件和配置站点

1. 进入刚刚创建的站点的根目录，删除原有的默认的**index.html**文件，上传自己的网站文件即可，记得文件位置不要弄错

>同时还有WordPress的一键部署但是我还没有实践过

2. **配置SSL:** 宝塔面板→网站→对应站点→设置→SSL→Let's Encrypt→勾选域名→申请，自动签发并配置，之后强制 HTTPS,如果不行就通过域名服务商进行DNS解析验证

### 自定义端口

1. 修改Nginx的监听端口，避用使用22 (SSH)、3306 (MySQL)、80/443、8888 (宝塔) 等常用端口，防止冲突

>可以使用终端命令查看占用（SSH）：`netstat -tuln | grep 端口号`，无输出则可用

2. 宝塔面板→网站→目标站点→设置→配置文件，找到`server`块里的`listen 80;`改为`listen 自定义端口;`（如`listen 8080;`）**若要 HTTPS**，同时改`listen 443 ssl;`为`listen 自定义SSL端口 ssl;`（如`listen 8443 ssl;`）保存配置文件后放行对应的端口

>**HTTPS注意点：**改`listen 443 ssl;`为`listen 自定义SSL端口 ssl;`，并在 SSL 配置中对应修改。

## 多站点部署（不同点）

### 新增站点

1. 域名填写`服务器IP:自定义端口`**此处第一个站点的时候是直接填IP不用再填端口，保持默认的端口当然如果要改，在根据自定义端口的教程该端口接口**，如果是自定义域名则填写新的域名后在对应的服务商添加解析即可
2. 数据库以及根目录等其他的完全不动，保持默认即可，同时自定义的端口一定需要放行

> **如果是的自定义域名**，自动使用默认 80/443 端口：无需改 Nginx 监听端口，宝塔会自动在 Nginx 中为新域名配置独立的`server`块。
>
> **如果是IP+端口**：进入第二个站点的**设置→配置文件**，将`listen 80;`改为自定义端口（如`listen 8081;`），保存后重启 Nginx即可

3. 域名访问：`http://新域名`（默认端口）或`http://新域名:自定义端口`

   IP 访问：`http://服务器IP:自定义端口`（无域名时）

## 常见问题

端口冲突：换端口，或停止占用端口的服务。

无法访问：检查安全组、宝塔防火墙、系统防火墙是否都放行端口，Web 服务是否正常启动。

配置错误：核对配置文件的`listen`指令，确保语法正确，重启 Web 服务。

## 📞联系作者
- QQ：2169702639
- QQ: 1938489204

## 🙏 致谢
感谢以下开源项目的支持：
- [青龙面板](https://github.com/whyour/qinglong)
- [345脚本开源库](https://2.345yun.cn)